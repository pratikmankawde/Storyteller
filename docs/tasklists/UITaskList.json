{  "project": "Dramebaz",  "category": "UI/UX Enhancements",  "description": "UI/UX features from NovelReaderWeb documentation for enhanced visual experience",  "version": "1.0",  "last_updated": "2026-02-03",  "instructions_source": "NovelReaderWeb/docs/UI.md, NovelReaderWeb/docs/UIFlow.md",  "reference_project": "C:\\Users\\Pratik\\source\\NovelReaderWeb",  "total_estimated_hours": 31,  "milestones": [    {      "id": "UI-M1",      "name": "Core Visual Enhancements",      "description": "Karaoke highlighting, character avatars, and waveform visualizer",      "done": true,      "task_ids": ["UI-001", "UI-002", "UI-003"]    },    {      "id": "UI-M2",      "name": "Animations & Transitions",      "description": "Shared element transitions, page turning effects, loading shimmer",      "done": true,      "task_ids": ["UI-004", "UI-005", "UI-006"]    }  ],  "tasks": [    {      "id": "UI-001",      "feature": "Karaoke Text Highlighting",      "description": "Implement word-by-word text sync with audio playback. Highlight current segment as TTS plays.",      "done": true,      "status": "completed",      "priority": "HIGH",      "estimated_hours": 12,      "reference_docs": [        "NovelReaderWeb/docs/UI.md - Section 'Karaoke Flow'",        "NovelReaderWeb/docs/UIFlow.md - Section 'Karaoke Sync'"      ],      "files_to_modify": [        "app/src/main/java/com/dramebaz/app/ui/reader/ReaderFragment.kt",        "app/src/main/java/com/dramebaz/app/playback/engine/PlaybackEngine.kt"      ],      "implementation_notes": "Use SpannableString with BackgroundColorSpan. Add activeSegmentRange StateFlow to PlaybackEngine. Emit range on segment play. Animate color transition using ValueAnimator.",      "work_items": [        "Add activeSegmentRange StateFlow to PlaybackEngine",        "Calculate text range for each segment (startOffset, endOffset)",        "Emit segment range when playback starts for each segment",        "In ReaderFragment, observe the range and update text styling",        "Use SpannableString with BackgroundColorSpan for highlighting",        "Animate color transition using ValueAnimator"      ],      "sub_tasks": [        {"id": "UI-001.1", "description": "Add TextRange data class and StateFlow to PlaybackEngine", "done": true},        {"id": "UI-001.2", "description": "Calculate segment text offsets during audio queue building", "done": true},        {"id": "UI-001.3", "description": "Emit active segment range during playback", "done": true},        {"id": "UI-001.4", "description": "Create updateTextHighlight() method in ReaderFragment", "done": true},        {"id": "UI-001.5", "description": "Add smooth color animation for highlight transitions", "done": true}      ],      "code_pattern": "// From NovelReaderWeb docs/UI.md\nText(buildAnnotatedString {\n    append(fullText)\n    if (activeSegmentRange != null) {\n        addStyle(SpanStyle(background = animatedColor),\n                 start = activeSegmentRange.start,\n                 end = activeSegmentRange.end)\n    }\n})"    },    {      "id": "UI-002",      "feature": "VoiceWaveform Visualizer",      "description": "Implement PCM buffer audio visualization with bezier curves based on amplitude.",      "done": true,      "status": "completed",      "priority": "MEDIUM",      "estimated_hours": 6,      "reference_docs": [        "NovelReaderWeb/docs/UI.md - Section 'VoiceWaveform'"      ],      "files_to_modify": [        "app/src/main/java/com/dramebaz/app/ui/common/VoiceWaveformView.kt (new)",        "app/src/main/res/layout/bottom_sheet_player.xml"      ],      "implementation_notes": "Create custom View/Canvas for audio visualization. Draw cubic bezier curves based on PCM amplitude (RMS). Connect to AudioTrack buffer during playback.",      "work_items": [        "Create VoiceWaveformView custom View class",        "Implement onDraw() with Canvas bezier curves",        "Calculate RMS amplitude from PCM buffer",        "Connect to PlaybackEngine audio buffer",        "Add smooth animation using invalidate() loop"      ],      "sub_tasks": [        {"id": "UI-002.1", "description": "Create VoiceWaveformView.kt custom View", "done": true},        {"id": "UI-002.2", "description": "Implement bezier curve drawing in onDraw()", "done": true},        {"id": "UI-002.3", "description": "Add RMS amplitude calculation from PCM data", "done": true},        {"id": "UI-002.4", "description": "Connect to PlaybackEngine for real-time data", "done": true},        {"id": "UI-002.5", "description": "Add to ReaderFragment layout", "done": true}      ]    },    {      "id": "UI-003",      "feature": "Character Avatar Bubbles",      "description": "Show active speaker avatar in Reader UI with pulse animation when speaking.",      "done": true,      "status": "completed",      "priority": "MEDIUM",      "estimated_hours": 4,      "reference_docs": [        "NovelReaderWeb/docs/UI.md - Section 'CharacterAvatarBubble'"      ],      "files_to_modify": [        "app/src/main/java/com/dramebaz/app/ui/reader/CharacterAvatarView.kt (new)",        "app/src/main/java/com/dramebaz/app/ui/reader/ReaderFragment.kt",        "app/src/main/res/layout/fragment_reader.xml"      ],      "implementation_notes": "Display character name and assigned voice. States: Idle, Speaking, Listening. Pulse animation on border when speaking.",      "work_items": [        "Create CharacterAvatarView custom View",        "Add states: Idle, Speaking, Listening",        "Implement pulse animation on border for Speaking state",        "Display character name and voice ID",        "Connect to PlaybackEngine active speaker"      ],      "sub_tasks": [        {"id": "UI-003.1", "description": "Create CharacterAvatarView.kt", "done": true},        {"id": "UI-003.2", "description": "Implement state-based rendering", "done": true},        {"id": "UI-003.3", "description": "Add pulse animation for Speaking state", "done": true},        {"id": "UI-003.4", "description": "Connect to active speaker from PlaybackEngine", "done": true}      ]    },    {      "id": "UI-004",      "feature": "Shared Element Transitions",      "description": "Implement Libraryâ+'BookDetail cover morphing animation.",      "done": true,      "status": "completed",      "priority": "LOW",      "estimated_hours": 4,      "reference_docs": [        "NovelReaderWeb/docs/UI.md - Section 'Shared Element Transitions'"      ],      "files_to_modify": [        "app/src/main/java/com/dramebaz/app/ui/library/LibraryFragment.kt",        "app/src/main/java/com/dramebaz/app/ui/library/BookDetailFragment.kt",        "app/src/main/java/com/dramebaz/app/ui/library/BookAdapter.kt",        "app/src/main/res/layout/item_book_card.xml",        "app/src/main/res/layout/fragment_book_detail.xml"      ],      "implementation_notes": "Implemented shared element transitions using MaterialContainerTransform. Library grid book cover morphs into BookDetail header. Uses ViewCompat.setTransitionName for unique IDs and FragmentNavigatorExtras for navigation.",      "work_items": [        "Add transitionName to book cover ImageView in library",        "Add matching transitionName to book detail header",        "Configure FragmentNavigator.Extras for shared element",        "Add enter/exit transitions using MaterialElevationScale and MaterialContainerTransform"      ],      "sub_tasks": [        {"id": "UI-004.1", "description": "Add transitionName to library book covers", "done": true},        {"id": "UI-004.2", "description": "Configure shared element navigation", "done": true},        {"id": "UI-004.3", "description": "Add transition animations", "done": true}      ]    },    {      "id": "UI-005",      "feature": "Fluid Page Turning Effects",      "description": "Implement book-fold rotation effects on page swipe.",      "done": true,      "status": "completed",      "priority": "LOW",      "estimated_hours": 3,      "reference_docs": [        "NovelReaderWeb/docs/UI.md - Section 'Fluid Page Turning'"      ],      "files_to_modify": [        "app/src/main/java/com/dramebaz/app/ui/reader/ReaderFragment.kt"      ],      "implementation_notes": "Use ViewPager2 with PageTransformer. Apply rotation effects to simulate book-spine fold on swipe (rotationY = pageOffset * -20f).",      "work_items": [        "Create BookFoldPageTransformer class",        "Apply rotationY based on page offset",        "Add camera distance for 3D effect",        "Apply alpha fade for off-screen pages"      ],      "sub_tasks": [        {"id": "UI-005.1", "description": "Create BookFoldPageTransformer", "done": true},        {"id": "UI-005.2", "description": "Apply to ViewPager2 in ReaderFragment", "done": true}      ],      "code_pattern": "// From NovelReaderWeb docs/UI.md\nCard(modifier = Modifier.graphicsLayer {\n    rotationY = pageOffset * -20f\n    cameraDistance = 8 * density\n    alpha = if (pageOffset.absoluteValue < 1) 1f - (pageOffset.absoluteValue * 0.3f) else 0f\n})"    },    {      "id": "UI-006",      "feature": "Loading Shimmer Effect",      "description": "Replace circular spinners with text-line shimmer during LLM analysis.",      "done": true,      "status": "completed",      "priority": "LOW",      "estimated_hours": 2,      "reference_docs": [        "NovelReaderWeb/docs/UI.md - Section 'LoadingShimmer'"      ],      "files_to_modify": [        "app/src/main/java/com/dramebaz/app/ui/common/ShimmerView.kt (new)",        "app/src/main/res/layout/layout_loading_shimmer.xml (new)"      ],      "implementation_notes": "Use LinearGradient with animation. Apply during LLM analysis loading states. Implies 'reading' rather than generic loading.",      "work_items": [        "Create ShimmerView custom View",        "Implement LinearGradient animation",        "Create shimmer layout with text-line placeholders",        "Replace ProgressDialog with shimmer in analysis screens"      ],      "sub_tasks": [        {"id": "UI-006.1", "description": "Create ShimmerView.kt", "done": true},        {"id": "UI-006.2", "description": "Create shimmer layout XML", "done": true},        {"id": "UI-006.3", "description": "Replace loading dialogs with shimmer", "done": true}      ]    }  ],  "notes": {    "design_philosophy": "From NovelReaderWeb: 'Fluid Intelligence' - UI must feel organic, not robotic. AI interactions should be visualized as 'thinking' or 'creative' processes.",    "core_metaphors": [      "The Living Book: Pages have weight, text glows when spoken",      "The Stage: UI shifts focus to active speaker",      "Adaptive Atmosphere: UI chrome adapts to scene's emotional tone"    ]  }}