{
  "project": "Dramebaz",
  "category": "Settings & Configuration UI",
  "description": "Settings sheet and configuration features from NovelReaderWeb for user customization",
  "version": "1.0",
  "last_updated": "2026-02-03",
  "instructions_source": "NovelReaderWeb source code analysis",
  "reference_project": "C:\\Users\\Pratik\\source\\NovelReaderWeb",
  "reference_files": [
    "src/components/settings-sheet/settings-sheet.component.ts",
    "src/config/theme.resources.ts"
  ],
  "total_estimated_hours": 14,
  "milestones": [
    {
      "id": "SETTINGS-M1",
      "name": "Display Settings",
      "description": "Theme, typography, and visual customization",
      "done": false,
      "task_ids": ["SETTINGS-001", "SETTINGS-002"]
    },
    {
      "id": "SETTINGS-M2",
      "name": "Feature Toggles & Diagnostics",
      "description": "Feature management and performance diagnostics",
      "done": false,
      "task_ids": ["SETTINGS-003", "SETTINGS-004"]
    }
  ],
  "tasks": [
    {
      "id": "SETTINGS-001",
      "feature": "Settings Bottom Sheet UI",
      "description": "Implement tabbed settings bottom sheet with Display, Audio, Features, About tabs",
      "done": false,
      "status": "not_started",
      "priority": "HIGH",
      "estimated_hours": 5,
      "reference_docs": [
        "NovelReaderWeb/src/components/settings-sheet/settings-sheet.component.ts"
      ],
      "files_to_modify": [
        "app/src/main/java/com/dramebaz/app/ui/settings/SettingsBottomSheet.kt (new)",
        "app/src/main/res/layout/bottom_sheet_settings.xml (new)"
      ],
      "implementation_notes": "Use BottomSheetDialogFragment with TabLayout. Tabs: Display, Audio, Features, About. Emit settings changes via callback.",
      "work_items": [
        "Create SettingsBottomSheet extending BottomSheetDialogFragment",
        "Implement TabLayout with 4 tabs",
        "Create layouts for each tab content",
        "Add settings change listener interface",
        "Persist settings using DataStore"
      ],
      "source_code_reference": "// From NovelReaderWeb settings-sheet.component.ts\nactiveTab = signal<'DISPLAY' | 'AUDIO' | 'FEATURES' | 'ABOUT'>('DISPLAY');\n\n<div class=\"flex p-1 bg-gray-100 rounded-lg\">\n  <button (click)=\"activeTab.set('DISPLAY')\">Display</button>\n  <button (click)=\"activeTab.set('AUDIO')\">Audio</button>\n  ..."
    },
    {
      "id": "SETTINGS-002",
      "feature": "Display Settings (Theme, Font, Typography)",
      "description": "Theme presets, font size/family, line height controls",
      "done": false,
      "status": "not_started",
      "priority": "HIGH",
      "estimated_hours": 4,
      "reference_docs": [
        "NovelReaderWeb/src/components/settings-sheet/settings-sheet.component.ts - DISPLAY tab",
        "NovelReaderWeb/src/config/theme.resources.ts - APP_FONTS"
      ],
      "files_to_modify": [
        "app/src/main/java/com/dramebaz/app/ui/settings/DisplaySettingsFragment.kt (new)",
        "app/src/main/java/com/dramebaz/app/data/models/ReadingSettings.kt (new)"
      ],
      "implementation_notes": "Theme presets: Light, Sepia, Dark, OLED. Font size slider (0.8-2.0). Line height slider (1.0-2.4). Font family selection grid.",
      "work_items": [
        "Create ReadingSettings data class",
        "Implement theme preset buttons (4 themes)",
        "Add font size SeekBar with live preview",
        "Add line height SeekBar",
        "Add font family selection grid",
        "Apply settings to ReaderFragment in real-time"
      ],
      "source_code_reference": "// From NovelReaderWeb theme.resources.ts\nexport const APP_FONTS: FontOption[] = [\n  { name: 'Merriweather', label: 'Classic', value: \"'Merriweather', serif\" },\n  { name: 'Libre Baskerville', label: 'Novel', value: \"'Libre Baskerville', serif\" },\n  // ...\n];"
    },
    {
      "id": "SETTINGS-003",
      "feature": "Feature Toggles",
      "description": "Toggle switches for resource-intensive AI features",
      "done": false,
      "status": "not_started",
      "priority": "MEDIUM",
      "estimated_hours": 3,
      "reference_docs": [
        "NovelReaderWeb/src/components/settings-sheet/settings-sheet.component.ts - FEATURES tab"
      ],
      "files_to_modify": [
        "app/src/main/java/com/dramebaz/app/ui/settings/FeaturesSettingsFragment.kt (new)",
        "app/src/main/java/com/dramebaz/app/data/models/FeatureSettings.kt (new)"
      ],
      "implementation_notes": "Toggles for: Smart Casting (High CPU), Generative Visuals (Slow), Deep Analysis (Background). Show resource impact labels.",
      "work_items": [
        "Create FeatureSettings data class with boolean flags",
        "Implement toggle switches with impact labels",
        "Persist settings using DataStore",
        "Connect to Director pipeline to enable/disable features"
      ],
      "source_code_reference": "// From NovelReaderWeb settings-sheet.component.ts\nexport interface FeatureSettings {\n  enableGenerativeVisuals: boolean;\n  enableSmartVoiceProcessing: boolean;\n  enableDeepAnalysis: boolean;\n}"
    },
    {
      "id": "SETTINGS-004",
      "feature": "System Benchmark & Diagnostics",
      "description": "Performance benchmark tool in About tab",
      "done": false,
      "status": "not_started",
      "priority": "LOW",
      "estimated_hours": 2,
      "reference_docs": [
        "NovelReaderWeb/src/services/benchmark.service.ts"
      ],
      "files_to_modify": [
        "app/src/main/java/com/dramebaz/app/utils/BenchmarkService.kt (new)",
        "app/src/main/java/com/dramebaz/app/ui/settings/AboutSettingsFragment.kt (new)"
      ],
      "implementation_notes": "Run benchmarks: Database Write, Database Read, Text Tokenization, Memory Allocation. Display results with Great/Good/Slow ratings.",
      "work_items": [
        "Create BenchmarkService with runFullBenchmark() method",
        "Implement individual benchmark tests",
        "Create BenchmarkMetric data class",
        "Display results in About tab with ratings",
        "Add 'Run Benchmark' button"
      ],
      "source_code_reference": "// From NovelReaderWeb benchmark.service.ts\nasync runFullBenchmark(): Promise<BenchmarkMetric[]> {\n  const metrics: BenchmarkMetric[] = [];\n  metrics.push(await this.benchmarkDbWrite());\n  metrics.push(await this.benchmarkDbRead());\n  metrics.push(this.benchmarkTextProcessing());\n  metrics.push(this.benchmarkMemoryAllocation());\n  return metrics;\n}"
    }
  ]
}

