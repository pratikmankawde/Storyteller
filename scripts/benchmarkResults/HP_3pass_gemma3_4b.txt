======================================================================
3-PASS WORKFLOW WITH CONTEXT PRESERVATION - BENCHMARK RESULTS
Model: gemma-3-4b-it-q4_0
PDF: C:\Users\Pratik\Downloads\HP First3Chapters.pdf
Date: 2026-02-01 15:12:39
======================================================================

SUMMARY
----------------------------------------
Model: gemma-3-4b-it-q4_0
Total Processing Time: 1205.0s (20.1 min)
Pages Processed: 5
Total Characters Found: 28
Total Dialogs Extracted: 0
Total Prompt Tokens: 11627
Total Generated Tokens: 279

PASS TIMING BREAKDOWN
----------------------------------------
  pass1          :    395.8s ( 32.9%)
  pass2          :    694.8s ( 57.7%)
  pass3          :    114.2s (  9.5%)

JSON VALIDITY STATISTICS
----------------------------------------
  pass1          : 4/5 (80% valid)
  pass2          : 0/5 (0% valid)
  pass3          : 0/28 (0% valid)

======================================================================
CHARACTER DETAILS
======================================================================


MR DURSLEY
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

MRS DURSLEY
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

DUDLEY
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

POTTERS
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

HARRY POTTER
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

CAT
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

OLD MAN
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

WEATHERMAN
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

HARRY
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

HOWARD
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

ALBUS DUMBLEDORE
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

PETUNIA
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

PROFESSOR MCGONAGALL
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

DEDALUS DIGGLE
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

VOLDEMORT
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

DUMBLEDORE
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

MCGONAGALL
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

HAGRID
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

SIRIUS BLACK
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

LILY
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

JAMES
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

MR. DURSLEY
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

MRS. DURSLEY
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

UNCLE VERNON
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

AUNT PETUNIA
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

MRS FIGG
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

YVONNE
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A

PIERS POLKISS
----------------------------------------
Dialogs: 0
Traits: []
Voice Profile:
  - Pitch: N/A
  - Speed: N/A
  - Energy: N/A
  - Gender: N/A
  - Age: N/A
  - Tone: N/A
  - Speaker ID: N/A


======================================================================
ALL EXTRACTED DIALOGS
======================================================================



======================================================================
CONTEXT PRESERVATION NOTES
======================================================================

This benchmark differs from the original test_three_pass_workflow.py by:

1. CONTEXT ACCUMULATION: Dialog extraction (Pass-2.5) receives context from
   previously extracted dialogs to help with speaker attribution.

2. FULL PAGE PROCESSING: All pages in the PDF are processed, not just the first page.

3. AGGREGATED CHARACTER CONTEXT: Pass-3 receives aggregated text from ALL
   pages where a character appears for traits and voice profile extraction.

4. CACHE_PROMPT ENABLED: The llama-server API call includes cache_prompt=True
   to enable prompt caching between similar requests.

Note: True conversation history (multi-turn chat) is NOT being used because
the llama-server /completion endpoint is stateless. Each request is independent.
However, we simulate context preservation by including relevant prior results
in subsequent prompts.
